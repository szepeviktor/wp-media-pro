!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=153)}({153:function(e,t){var i=window,n=i.imageEdit,a=i.ajaxurl,r=i.jQuery,o=i.imageEditL10n,d=i.wp,s=i.document,l=null,u=null,c=null;n.oldInit=n.init,n.oldOpen=n.open,n.init=function(e){this.oldInit(e),l=this},n.open=function(e,t,i){return u=t,this.oldOpen(e,t,i)},n.refreshEditor=function(e,t,i){var d=this;d.toggleEditor(e,1);var s={action:"wpmp_edit_preview",_ajax_nonce:t,postid:e,history:d.filterHistory(e,1),rand:d.intval(1e6*Math.random())};c&&(s.size=c);var l=r('<img id="image-preview-'+e+'" alt="" />').on("load",{history:s.history},(function(t){var a,o=r("#imgedit-crop-"+e);""!==t.data.history&&(a=JSON.parse(t.data.history))[a.length-1].c&&(n.setDisabled(r("#image-undo-"+e),!0),r("#image-undo-"+e).focus()),o.empty().append(l);var s=Math.max(d.hold.w,d.hold.h),u=Math.max(r(l).width(),r(l).height());n.hold.sizer=s>u?u/s:1,n.initCrop(e,l,o),"undefined"!==typeof i&&null!==i&&i(),r("#imgedit-history-"+e).val()&&"0"===r("#imgedit-undone-"+e).val()?r("input.imgedit-submit-btn","#imgedit-panel-"+e).removeAttr("disabled"):r("input.imgedit-submit-btn","#imgedit-panel-"+e).prop("disabled",!0),n.toggleEditor(e,0)})).on("error",(function(){r("#imgedit-crop-"+e).empty().append('<div class="error"><p>'+o.error+"</p></div>"),d.toggleEditor(e,0)})).attr("src",a+"?"+r.param(s))},n.openSize=function(e){var t=this.postid,i=r("#imgedit-open-btn-"+t);if(c=e,i.hasClass("button-activated"))return null;var o=r("#image-editor-"+t),d=r("#media-head-"+t),s=i.siblings(".spinner");s.addClass("is-active");var l={action:"image-editor",_ajax_nonce:u,postid:t,do:"open"};return e&&(l.size=e),r.ajax({url:a,type:"post",dataType:"json",data:l,beforeSend:function(){i.addClass("button-activated")}}).done((function(e){var a=e.data.html;o.html(a),d.fadeOut("fast",(function(){o.fadeIn("fast"),i.removeClass("button-activated"),s.removeClass("is-active")})),n.init(t)}))},n.action=function(e,t,i,n){var o=this;if(o.notsaved(e))return!1;var s={action:"image-editor",_ajax_nonce:t,postid:e,target:n};if("scale"===i){var l=r("#imgedit-scale-width-"+e),u=r("#imgedit-scale-height-"+e),c=o.intval(l.val()),p=o.intval(u.val());if(c<1)return l.focus(),!1;if(p<1)return u.focus(),!1;if(c===o.hold.ow||p===o.hold.oh)return!1;s.do="scale",s.fwidth=c,s.fheight=p}else{if("restore"!==i)return!1;s.do="restore"}return o.toggleEditor(e,1),r.post(a,s,(function(t){r("#image-editor-"+e).empty().append(t.data.html),o.toggleEditor(e,0,!0),o._view&&o._view.refresh()})).done((function(e){e&&e.data.message.msg?d.a11y.speak(e.data.message.msg):e&&e.data.message.error&&d.a11y.speak(e.data.message.error)})),!0},n.scaleChanged=function(e,t,i){var n="",a="",o=s.querySelector('input[name="wpmp-current-width-'+e+'"]').value/s.querySelector('input[name="wpmp-current-height-'+e+'"]').value;if(!1!==this.validateNumeric(i)){var d=r("#imgedit-scale-width-"+e),l=r("#imgedit-scale-height-"+e),u=r("#imgedit-scale-warn-"+e);t?(a=""!==d.val()?Math.round(d.val()/o):"",l.val(a)):(n=""!==l.val()?Math.round(l.val()*o):"",d.val(n)),a&&a>this.hold.oh||n&&n>this.hold.ow?u.css("visibility","visible"):u.css("visibility","hidden")}},n.onEditModeChange=function(e){var t=s.querySelector(".wpmp-image-size");"individual"===e?t.classList.add("show"):(l.openSize(null),t.classList.remove("show"))},n.onSizeChange=function(e){l.openSize(e)}}});